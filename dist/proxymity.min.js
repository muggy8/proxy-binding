var proxymity=function(n){function e(n){return Array.prototype.slice.call(n||[])}function t(n,e){return n&&("number"==typeof(t=n.length)&&!isNaN(t))&&Array.prototype.forEach.call(n,e);var t}function r(n){return"string"==typeof n}function i(n){return n&&"object"==typeof n}function o(n){return Array.isArray(n)}function u(n,e){var t,r,i;return void 0===e||n>e?(r=n,t=e||0):(t=n,r=e),i=r-t,Math.round(Math.random()*(i+.9998)-.4999)+t}var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";function c(n=16){for(var e=a[u(51)],t=1;t<n;t++)e+=a[u(62)];return e}function f(n,e,t){return Object.defineProperty(n,e,{value:t}),t}function l(n,e,t,r){return defineConfigs={get:t},r&&(defineConfigs.set=r),Object.defineProperty(n,e,defineConfigs)}var s=function(){var n=c(u(32,48)),e=!1,r=[];function i(t){var i=Array.prototype.slice.call(arguments,1);e||(window.postMessage(n,"*"),e=!0),r.some(function(n){return n.fn===t&&(n.args=i,!0)})||r.push({fn:t,args:i})}return window.addEventListener("message",function(o){if(o.data===n){o.stopPropagation();var a=r;n=c(u(32,48)),e=!1,r=[],t(a,function(n){n.fn.apply(window,n.args)}),i.asyncEnd&&(i.asyncEnd(),delete i.asyncEnd,delete i.asyncEndPromise),!e&&i.renderEnd&&(i.renderEnd(),delete i.renderEnd,delete i.renderEndPromise)}}),i}();function d(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function p(e,r,i){var o,u=this||{},a=[];t(function(n=""){var e=0,t=[],r=0;function i(){throw new Error("Potential Syntax Error within code: \n"+n)}function o(r,i=!0){var o=n.substring(e,r);if(!o)return e=r+1;i&&(o='"'+o+'"'),t.push(o),e=r+1}for(var u=0;u<n.length;u++)"."!==n[u]||r?r?r&&("["===n[u]?r++:"]"===n[u]&&r--,r||o(u,!1)):"["===n[u]?(o(u),r++):"]"===n[u]&&i():o(u);return e!==n.length&&o(n.length),r&&i(),t}(r),function(e){a.push(n.call(u,e))});var c="";t(a,function(n){"len"===n&&y(e),c+=c?" -> "+n:n;var t=Object.getOwnPropertyDescriptor(e,n);if(void 0===t)console.warn(c+" not defined in data source and is initiated as {}. \n\tOriginal: "+r),o=h(e,n);else if(v(t))o=t;else if(t){var i=e[n];delete e[n],o=h(e,n,i)}e=e[n]});return o.get(function(){var n=Array.prototype.slice.call(arguments);return i.apply(this,n)})}function v(n){return n&&n.get&&n.get.length&&n.set&&n.set.length>1}function h(n,e,r={},o={}){var u,a=[];return y(r),Object.defineProperty(n,e,u={enumerable:!d(o,"enumerable")||o.enumerable,configurable:!d(o,"configurable")||o.configurable,get:function(n){if(n){if(a.some(function(e){return e.exe===n}))return function(){};var e={exe:n},t=a[a.length-1];return t&&(t.next=e,e.previous=t),a.push(e),function(){a.splice(a.indexOf(e),1),e.next&&(e.next.pervious=e.previous),e.previous&&(e.previous.next=e.next),e.unwatch&&e.unwatch()}}return r},set:function(n,e){var o=r;if(o===n)return n;if(void 0!==n){y(r=n),i(o)&&i(r)&&function n(e,r){var i=Object.getOwnPropertyNames(e);t(i,function(t){var i=Object.getOwnPropertyDescriptor(e,t),o=Object.getOwnPropertyDescriptor(r,t);if(v(i)&&!v(o)){var u=r[t];void 0===u&&(u={}),delete r[t];var a=h(r,t,u);a.value=u,i.set(void 0,a),n(e[t],r[t])}})}(o,r);for(u=a[0];u;u=u.next)s(u.exe,n,o)}else if(e){t(a,function(n){n.unwatch=e.get(n.exe)});for(var u=a[0];u;u=u.next)s(u.exe,e.value,r);return}}}),u}var g={};function y(n){n&&o(n)&&!d(n,"len")&&(h(n,"len",n.length,{enumerable:!1}),t(Object.getOwnPropertyNames(g),function(e){var t=g[e];f(n,e,t)}))}t(Object.getOwnPropertyNames(Array.prototype),function(n){var e=Array.prototype[n];"function"==typeof e&&(g[n]=function(){var n=Array.prototype.slice.call(arguments),t=e.apply(this,n);return this.len=this.length,t})});var m=document.createElement("template");function x(n,e,r,i){for(var o,u=!1,a=[],c=[],f=[],l=n.length-1;l>-1;l--){var s=!0,d=n[l];if(u&&(s=!1),d instanceof Comment&&0===d.textContent.trim().toLowerCase().indexOf("in:")&&(s=u=!0,o=d),d instanceof Comment&&0===d.textContent.trim().toLowerCase().indexOf("key:")){s=!0,u=!1;var p=function(t,o,u){a.push(b(t,o,u,n,e,r,i))}.bind(null,d,o,f);c.splice(c.length-1,0,p),o=void 0,f=[]}s?c.push(function(n){t(w(n,e,r,i),function(n){a.push(n)})}.bind(null,d)):(n.splice(l,1),d.parentNode&&d.parentNode.removeChild(d),f.unshift(d))}for(l=c.length-1;l>-1;l--)c[l]();return a}function b(r,i,o,u,a,c,f){var l=[],s=[],d=r.textContent.trim().slice(4),v=i.textContent.trim().slice(3).trim(),h=v+".len",g=n.call(r,d);return l.push(p.call(i,a,h,y)),y(n.call(i,"data."+v,{data:a}).length),function(){t(s,function(n){n.unlink()}),t(l,function(n){n()})};function y(n){if(s.length<n){var r=n-s.length;f||(f=function(n,e,t){return function(){}});for(var l=0;l<r;l++){var d=e(o).map(function(n){return n.cloneNode(!0)}),p=[];let n=function(n,e,t,r){var i=f(e,t,r);return Object.defineProperty(e,g,{configurable:!0,get:function(){return n}}),function(){i(),delete e[g]}}.bind(null,s.length);t(x(d,a,c,n),function(n){p.push(n)}),O(d,p,a,c),s.push(d),i.parentNode&&t(d,function(n){i.parentNode.insertBefore(n,i)});var v=u.indexOf(i)-1,h=d.slice();h.unshift(0),h.unshift(v),Array.prototype.splice.apply(u,h)}}else if(s.length>n){t(s.splice(s.length-1,s.length-n),function(n){n.unlink(),n.detach();for(var e=u.length-1;e>-1;e--)-1!==n.indexOf(u[e])&&u.splice(e,1)})}}}c(u(32,48));function w(n,r,i,o){var u=[];if(function(n,e,t){Object.defineProperty(n,t,{configurable:!0,get:function(){return e}})}(n,r,i),u.push(function(){delete n[i]}),o){var a=o(n,r,i);u.push(a)}if(n instanceof CharacterData){var c=C(n,n,i);c&&u.push(c)}else{t(e(n.attributes),function(e){var t=C(e,n,i);t&&u.push(t)}),t(x(e(n.childNodes),r,i,o),function(n){u.push(n)})}return u}function O(n,e,t,r){return f(n,r,t),f(n,"appendTo",P),f(n,"detach",E),f(n,"unlink",function(){for(var n=0;n<e.length;n++)e[n]()}),n}function P(n){if(r(n))return appendableArrayProto.appendTo.call(this,document.querySelector(n));var e=n;return t(this,function(n){e.appendChild(n)}),this}function E(){return t(this,function(n){var e=n.parentElement;e&&e.removeChild(n)}),this}function C(e,r,i){var o=[];t(e.textContent.split("{:"),function(n,e){t(n.split(":}"),function(n,t){o.push({text:n,code:!t&&!!e})})}),t(o,function(n,e){if(n.text.length>2&&"|"===n.text[0]&&"{"===n.text[1]){var t=n.text.indexOf("}|"),r=n.text.slice(1,t+1);n.text=n.text.slice(t+2),o[e-1].watching=r.split(",").map(function(n){return n.trim().slice(1,-1)}).filter(function(n){return n})}});var u=[];if(t(o=o.filter(function(n){return n.text||n.code}),function(a){if(a.code)if(a.watching){function c(){a.val=n.call(r,a.text),N(e,o)}t(a.watching,function(n){u.push(p.call(r,r[i],n.trim(),c))}),c()}else a.val=n.call(r,a.text);else a.val=a.text}),N(e,o),u.length)return function(){t(u,function(n){n()})}}function N(n,e){var r="";t(e,function(n){void 0!==n.val&&(r+=n.val)}),n.textContent=r}var j=function(n,t={},i="app"){return function n(t,i,u){if(r(t))return m.innerHTML=t.trim(),n(m.content.childNodes,i,u);if(t instanceof NodeList||o(t)&&t.reduce(function(n,e){return n&&e instanceof Node},!0)){var a=e(t);return O(a,x(a,i,u),i,u)}return t instanceof Node?O([t],w(t,i,u),i,u):void 0}(n,t,i)},A=function(n){var e=n+"Promise";return s[e]?s[e]:s[e]=new Promise(function(e){s[n]=e})},L=function(n,e){(function(n){return"function"==typeof n})(e)&&A(n).then(e)};return f(j,"on",{}),f(j,"watch",p),l(j.on,"asyncend",A.bind(this,"asyncEnd"),L.bind(this,"asyncEnd")),l(j.on,"renderend",A.bind(this,"renderEnd"),L.bind(this,"renderEnd")),f(j,"random",{}),f(j.random,"number",u),f(j.random,"string",c),j}(function(s,sv,t=!1){try{if(sv)with(sv)return eval(s);return eval(s)}catch(o3o){if(t)throw o3o;return console.error("failed to evaluate expression ["+s+"]",this,o3o),""}});"undefined"!=typeof module&&(module.exports=proxymity);