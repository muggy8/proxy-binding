var proxymity=function(n){function t(n){return Array.prototype.slice.call(n||[])}function e(n,t){return n&&("number"==typeof(e=n.length)&&!isNaN(e))&&Array.prototype.forEach.call(n,t);var e}function r(n){return"string"==typeof n}function i(n){return Array.isArray(n)}function o(n,t){var e,r,i;return void 0===t||n>t?(r=n,e=t||0):(e=n,r=t),i=r-e,Math.round(Math.random()*(i+.9998)-.4999)+e}var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";function c(n){n=n||16;for(var t=a[o(51)],e=1;e<n;e++)t+=a[o(62)];return t}function u(n,t,e){return Object.defineProperty(n,t,{value:e}),e}function f(n,t,e,r){var i={get:e};return r&&(i.set=r),Object.defineProperty(n,t,i)}var l=function(){var n=c(o(32,48)),t=!1,r=[];function i(e){var i=Array.prototype.slice.call(arguments,1);t||(window.postMessage(n,"*"),t=!0),r.some(function(n){return n.fn===e&&(n.args=i,!0)})||r.push({fn:e,args:i})}return window.addEventListener("message",function(a){if(a.data===n){a.stopPropagation();var u=r;n=c(o(32,48)),t=!1,r=[],e(u,function(n){n.args=n.args.map(function(n){return h(n)?n.get():n}),n.fn.apply(window,n.args)}),i.asyncEnd&&(i.asyncEnd(),delete i.asyncEnd,delete i.asyncEndPromise),!t&&i.renderEnd&&(i.renderEnd(),delete i.renderEnd,delete i.renderEndPromise)}}),i}();function s(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function d(t,r,o,a){a=a||function(){};var c=this||{},u=[];return e(function(n){n=n||"";var t=0,e=[],r=0;function i(){throw new Error("Potential Syntax Error within code: \n"+n)}function o(r,i){void 0===i&&(i=!0);var o=n.substring(t,r);if(!o)return t=r+1;i&&(o='"'+o+'"'),e.push(o),t=r+1}for(var a=0;a<n.length;a++)"."!==n[a]||r?r?r&&("["===n[a]?r++:"]"===n[a]&&r--,r||o(a,!1)):"["===n[a]?(o(a),r++):"]"===n[a]&&i():o(a);return t!==n.length&&o(n.length),r&&i(),e}(r),function(t){u.push(n.call(c,t))}),function n(t,r,o,a,c){var u=o[0];"length"===u&&i(r)&&(u="len");"len"===u&&O(r);if("*"===u&&i(r)){O(r);var f={},l=v(o);l.unshift(0);return f.length=n(t,r,["length"],function(){e(Object.keys(r),function(n){f[n]||(l[0]=n,f[n]=function n(t,r,o,a,c){var u=o[0];"length"===u&&i(r)&&(u="len");"len"===u&&O(r);if("*"===u&&i(r)){O(r);var f={},l=v(o);l.unshift(0);return f.length=n(t,r,["length"],function(){e(Object.keys(r),function(e){f[e]||(l[0]=e,f[e]=n(t,r,l,a,c))})},c),function(){e(Object.keys(f),function(n){f[n](),delete f[n]})}}t+=t?" -> "+u:u;var s=Object.getOwnPropertyDescriptor(r,u);var d;if(void 0===s)console.warn(t+" not defined in data source and is initiated as {}. \n\tOriginal: "+o),d=m(r,u);else if(h(s))d=s;else if(s){var p=r[u];delete r[u],d=m(r,u,p)}if(o.length>1){var y=v(o);return n(t,r[u],y,a,c)}return d.get(a,c)}(t,r,l,a,c))})},c),function(){e(Object.keys(f),function(n){f[n](),delete f[n]})}}t+=t?" -> "+u:u;var s=Object.getOwnPropertyDescriptor(r,u);var d;if(void 0===s)console.warn(t+" not defined in data source and is initiated as {}. \n\tOriginal: "+o),d=m(r,u);else if(h(s))d=s;else if(s){var p=r[u];delete r[u],d=m(r,u,p)}if(o.length>1){var y=v(o);return n(t,r[u],y,a,c)}return d.get(a,c)}("",t,u,function(){var n=Array.prototype.slice.call(arguments);return o.apply(c,n)},function(){var n=Array.prototype.slice.call(arguments);return a.apply(c,n)})}function p(n,t,r,o,a){var c=r[0];if(c==="length"&&i(t)){c="len"}if(c==="len"){O(t)}if(c==="*"&&i(t)){O(t);var u={};var f=v(r);f.unshift(0);var l=function(){var r;e(Object.keys(t),function(e){if(u[e]){return}f[0]=e;u[e]=p(n,t,f,o,a)})};u.length=p(n,t,["length"],l,a);return function(){e(Object.keys(u),function(n){u[n]();delete u[n]})}}n=n+(n?" -> "+c:c);var s=Object.getOwnPropertyDescriptor(t,c);var d;if(typeof s==="undefined"){console.warn(n+" not defined in data source and is initiated as {}. \n\tOriginal: "+r);d=m(t,c)}else if(h(s)){d=s}else if(s){var y=t[c];delete t[c];d=m(t,c,y)}if(r.length>1){var g=v(r);return p(n,t[c],g,o,a)}else{return d.get(o,a)}}function v(n){var t=[];return e(n,function(n,e){e&&t.push(n)}),t}function h(n){return n&&n.get&&2===n.get.length&&n.set&&1===n.set.length}var y=c(23),g=c(23);function m(n,t,e,r){e=arguments.length>2?e:{},r=r||{};var i,o=new w,a=function(n,t){o.each(function(e){e.set(n,t)})};return O(e),Object.defineProperty(n,t,i={enumerable:!s(r,"enumerable")||r.enumerable,configurable:!s(r,"configurable")||r.configurable,get:function(n,t){if(n&&t){var r=o.find(function(e){return e.set===n&&e.del===t});return!r&&(r=o.push({set:n,del:t})),l(a,e),r.drop}return e},set:function(r){var i=this;if(void 0===r&&(delete n[t],o.each(function(n){n.drop(),Function.prototype.call.call(n.del,i)}),x(e)),r===g)l(a,e,e);else{if(r!==y){if(r!==e){l(a,r,e);var c=e;O(e=r),x(c)}return e}o.each(function(n){n.drop(),Function.prototype.call.call(n.del,i)}),x(e)}}}),i}function x(n){var t;(t=n)&&"object"==typeof t&&(i(n)&&s(n,"len")&&(n.len=y),e(Object.keys(n),function(t){h(Object.getOwnPropertyDescriptor(n,t))&&(n[t]=y)}))}var b={};function O(n){n&&i(n)&&!s(n,"len")&&(m(n,"len",n.length,{enumerable:!1}),e(Object.getOwnPropertyNames(b),function(t){var e=b[t];u(n,t,e)}))}function w(){this.first=null,this.last=null,this.length=0}e(Object.getOwnPropertyNames(Array.prototype),function(n){var t=Array.prototype[n];"function"==typeof t&&(b[n]=function(){var n=Array.prototype.slice.call(arguments),e=t.apply(this,n);return this.len=this.length,this.len=g,e})}),w.prototype={push:function(n){var t=new function(n,t){var e=this;Object.assign(e,n),e.prev=null,e.next=null,e.drop=function(){!function(n,t){var e=!1;if(n.prev&&n.prev.next===n&&(n.prev.next=n.next,e=!0),n.next&&n.next.prev===n&&(n.next.prev=n.prev,e=!0),!(e||1===t.length&&t.first===n&&t.last===n))return;t.first===n&&(t.first=n.next),t.last===n&&(t.last=n.prev),t.length--}(e,t)}}(n,this);return t.prev=this.last,this.last&&(this.last.next=t),this.last=t,!this.first&&(this.first=t),this.length++,t},each:function(n){for(var t=this.first;t;)n(t),t=t.next},find:function(n){for(var t=this.first,e=0,r=null;t&&!r;){var i=n(t,e);e++,i&&(r=t),t=t.next}return r}};var j=document.createElement("template");function E(n,t,r,i){for(var o,a,c=!1,u=[],f=[],l=[],s=n.length-1;s>-1;s--){var d=!0,p=n[s];if(c&&(d=!1),p instanceof Comment&&0===p.textContent.trim().toLowerCase().indexOf("in:")&&(d=c=!0,o=p),p instanceof Comment&&0===p.textContent.trim().toLowerCase().indexOf("key:")&&(d=!0,a=p),p instanceof Comment&&0===p.textContent.trim().toLowerCase().indexOf("foreach:")){d=!0,c=!1;var v=function(e,o,a,c){u.push(C(e,o,a,c,n,t,r,i))}.bind(null,p,o,a,l);f.splice(f.length-1,0,v),o=a=void 0,l=[]}d?f.push(function(n){e(k(n,t,r,i),function(n){u.push(n)})}.bind(null,p)):(n.splice(s,1),p.parentNode&&p.parentNode.removeChild(p),l.unshift(p))}for(s=f.length-1;s>-1;s--)f[s]();return u}function C(r,i,o,a,c,u,f,l){var s,p,v=[],h={},y=r.textContent.trim().slice(8).trim(),g=i.textContent.trim().slice(3).trim(),m=g+".len",x=n.call(r,y),b=r;if(o){var O=o.textContent.trim().slice(4).trim();b=o}return l||(l=function(n,t,e){return function(){}}),function t(){if(s){var e=v.indexOf(s);v.splice(e,1)}v.push(s=d.call(i,u,m,w,t));p=n.call(i,g,u);w()}(),function(){e(Object.keys(h),function(n){h[n].unlink()}),e(v,function(n){n()})};function w(){var r={};e(p,function(o,c){var s=c;if(O&&"string"!=typeof(s=n.call(i,O,o))&&"number"!=typeof s)throw new Error("Keys can only be Strings or Numbers but got "+typeof s+" while trying to read "+O+" from "+g+"["+c+"]");var d=h[s]=h[s]||function(n,r){var i=(c=a,t(c).map(function(n){return n.cloneNode(!0)})),o=[];var c;e(E(i,u,f,function(n,t,e){var o=l(n,t,e);return i.index=r,Object.defineProperty(n,x,{configurable:!0,get:function(){return i.index}}),function(){o(),delete n[x]}}),function(n){o.push(n)});var s=function(){e(o,function(n){n!==s&&n()}),n.splice(n.indexOf(s),1)};return n.push(s),o.push(s),N(i,o,u,f),i}(v,c);if(d.key=s,d.index=c,r[s])throw new Error("Keys must be unique but found duplicate key at: "+g+"["+c+"]");r[s]=d}),e(Object.keys(h),function(n){r[n]||(h[n].detach(),h[n].unlink(),j(h[n]),delete h[n])});for(var o=0,s=[b];o<p.length;o++){var d=p[o],y=(o-1>=0&&p[o-1],O?n.call(i,O,d):o),m=s[s.length-1],w=c.indexOf(m),C=c[w+1],P=h[y];if(C[x]!==o){C&&C.parentElement&&P.appendTo(C.parentElement,C),j(P);var k=c.indexOf(m)+1,A=P.slice();A.unshift(0),A.unshift(k),Array.prototype.splice.apply(c,A)}s=P}}function j(n){var t=c.indexOf(n[0]);t>-1&&c.splice(t,n.length)}}function P(n,t,r){Object.defineProperty(n,r,{configurable:!0,get:function(){return t},set:function(n){var r=Object.keys(t),i=Object.keys(n);e(r,function(n){-1===i.indexOf(n)&&(h(Object.getOwnPropertyDescriptor(t,n))?t[n]=void 0:delete t[n])}),e(i,function(e){t[e]=n[e]})}})}c(o(32,48));function k(n,r,i,o){var a=[];if(P(n,r,i),a.push(function(){delete n[i]}),o){var c=o(n,r,i);a.push(c)}if(n instanceof CharacterData){var u=L(n,n,i);u&&a.push(u)}else{e(t(n.attributes),function(t){var e=L(t,n,i);e&&a.push(e)}),e(E(t(n.childNodes),r,i,o),function(n){a.push(n)})}return a}function N(n,t,e,r){return P(n,e,r),u(n,"appendTo",A),u(n,"detach",D),u(n,"unlink",function(){for(var n=0;n<t.length;n++)t[n]()}),n}function A(n,t){if(r(n))return A.call(this,document.querySelector(n),t);if(r(n))return A.call(this,n,n.querySelector(t));var i=n;return e(this,t?function(n){i.insertBefore(n,t)}:function(n){i.appendChild(n)}),this}function D(){return e(this,function(n){var t=n.parentElement;t&&t.removeChild(n)}),this}function L(t,r,i){var o=[];e(t.textContent.split("{:"),function(n,t){e(n.split(":}"),function(n,e){o.push({text:n,code:!e&&!!t})})}),e(o,function(n,t){if(n.text.length>2&&"|"===n.text[0]&&"{"===n.text[1]){var e=n.text.indexOf("}|"),r=n.text.slice(1,e+1);n.text=n.text.slice(e+2),o[t-1].watching=r.split(",").map(function(n){return n.trim().slice(1,-1)}).filter(function(n){return n})}});var a=!0;e(o=o.filter(function(n){return n.text||n.code}),function(n){a&&(n.code||(n.code||n.text.trim())&&(a=!1))}),a&&(o=o.filter(function(n){return n.code}));var c=[];if(e(o,function(a){if(a.code)if(a.watching){function u(){a.val&&a.val.detach&&a.val.detach(),a.val=n.call(r,a.text),T(t,o)}e(a.watching,function(n){var t;!function e(){if(t){var o=c.indexOf(t);c.splice(o)}c.push(t=d.call(r,r[i],n.trim(),u,e))}()})}else a.val=n.call(r,a.text);else a.val=a.text}),T(t,o),c.length)return function(){e(c,function(n){n()})}}function T(n,t){var r,i=!0;if(e(t,function(n){n.code||(i=!1),n.val&&n.val.appendTo===A&&n.val.detach===D||(i=!1)}),1===t.length&&n instanceof Attr){r=t[0].val;var o=n.ownerElement;if("data-"!==n.name.slice(0,5))return n.textContent=r;var a=n.name.slice(5);a in o&&(o[a]=r)}else i&&(n instanceof Text||n instanceof Comment)?(e(t,function(t){t.val.appendTo(n.parentNode,n)}),n.textContent=""):(r="",e(t,function(n){void 0!==n.val&&(r+=n.val)}),n.textContent=r)}var M=function(n,e,o){return function n(e,o,a){if(r(e))return j.innerHTML=e.trim(),n(j.content.childNodes,o,a);if(e instanceof NodeList||i(e)&&e.reduce(function(n,t){return n&&t instanceof Node},!0)){var c=t(e);return N(c,E(c,o,a),o,a)}return e instanceof Node?N([e],k(e,o,a),o,a):void 0}(n,e=e||{},o=o||"app")},S=function(n){var t=n+"Promise";return l[t]?l[t]:l[t]=new Promise(function(t){l[n]=t})},q=function(n,t){"function"==typeof t&&S(n).then(t)};return u(M,"on",{}),u(M,"watch",d),f(M.on,"asyncend",S.bind(this,"asyncEnd"),q.bind(this,"asyncEnd")),f(M.on,"renderend",S.bind(this,"renderEnd"),q.bind(this,"renderEnd")),u(M,"random",{}),u(M.random,"number",o),u(M.random,"string",c),M}(function(s,sv,t){void 0===t&&(t=!1);try{if(sv)with(sv)return eval(s);return eval(s)}catch(o3o){if(t)throw o3o;return console.error("failed to evaluate expression ["+s+"]",this,o3o),""}});"undefined"!=typeof module&&(module.exports=proxymity);