<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
		<!-- <script src="https://unpkg.com/mobile-inspector"></script> -->
		<script src="../src/proxymity-util.js"></script>
		<script src="../src/on-next-event-cycle.js"></script>
		<script src="../src/subscribable.js"></script>
		<script src="../src/proxymity-obj.js"></script>
		<script src="../src/proxymity-observe.js"></script>
		<script src="../src/proxymity-ui.js"></script>
		<script src="../src/proxymity.dev.js"></script>
	</head>
	<body>
		<div class="fixed col-2-2 col-1-2-mid col-1-4-big cell" style="bottom: 0; right: 0">
			<!-- foreach:{
				console.log("setting")
				this.app.item.notifications = [{}]
				key("index").in(this.app.item.notifications)
			}-->
				<div onclick="this.app.item.notifications.push({})">
					{:console.log("rendering"); this.app.item.notifications[this.index].stringify():}
				</div>
			<!-- foreach: key.end() -->
			<button onclick="this.app.item = {}">reset</button>
		</div>
		<script>
			// gonna stub this in here
			var safeEval = function(s, sv = {}){
				var os = s
				for(let k in sv){
					s = "var " + k + " = sv." + k + ";\n" + s
				}
				try {
					return eval(s)
				}
				catch(o3o){
					console.error("failed to evaluate expression [" + os + "]", this, o3o)
					return ""
				}
			}

			var test = proxymity(document.querySelector(".fixed"), {
				item: {
					notifications: [{}]
				}
			})
		</script>
	</body>
</html>
